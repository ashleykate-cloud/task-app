{% extends "base.html" %}

{% block title %}Edit Task{% endblock %}

{% block content %}
<h2 style="margin-top: 0;">Edit Task</h2>

<div style="
    background: #ffffff;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    max-width: 700px;
">
    <!-- Edit Task Form -->
    <form method="post">
        <div style="margin-bottom: 14px;">
            <label style="display: block; font-weight: 500;">Title</label>
            <input type="text" name="title"
                   value="{{ task['title'] }}"
                   required
                   style="width: 100%; padding: 8px; box-sizing: border-box;">
        </div>

        <div style="margin-bottom: 14px;">
            <label style="display: block; font-weight: 500;">Description</label>
            <textarea name="description" rows="4"
                      style="width: 100%; padding: 8px; box-sizing: border-box;">{{ task['description'] }}</textarea>
        </div>

        <div style="margin-bottom: 14px;">
            <label style="display: block; font-weight: 500;">Assign To</label>
            <select name="assigned_to"
                    style="width: 100%; padding: 6px;">
                {% for user in users %}
                    <option value="{{ user['username'] }}"
                        {% if user['username'] == task['assigned_to'] %}selected{% endif %}>
                        {{ user['username'] }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div style="margin-bottom: 14px;">
            <label style="display: block; font-weight: 500;">Due Date</label>
            <input type="date" name="due_date"
                   value="{{ task['due_date'] }}"
                   style="padding: 6px;">
        </div>

        <div style="margin-bottom: 18px;">
            <label style="display: block; font-weight: 500;">Status</label>
            <select name="status"
                    style="padding: 6px;">
                <option value="Pending"
                        {% if task['status'] == 'Pending' %}selected{% endif %}>
                    Pending
                </option>
                <option value="Done"
                        {% if task['status'] == 'Done' %}selected{% endif %}>
                    Done
                </option>
            </select>
        </div>

        <button type="submit"
                style="
                    background: #1a73e8;
                    color: white;
                    border: none;
                    padding: 8px 16px;
                    border-radius: 4px;
                    cursor: pointer;
                ">
            Save Changes
        </button>
    </form>

    <hr style="margin: 20px 0; border: none; border-top: 1px solid #dadce0;">

    <!-- Delete Task Form -->
    <form method="post"
          action="{{ url_for('delete_task', task_id=task['id']) }}"
          onsubmit="return confirm('Are you sure you want to delete this task?');">

        <button type="submit"
                style="
                    background-color: #d93025;
                    color: white;
                    border: none;
                    padding: 8px 16px;
                    border-radius: 4px;
                    cursor: pointer;
                ">
            Delete Task
        </button>
    </form>
</div>
{% endblock %}
